import{_ as f,o,c as a,e as r,i as m,v as p,k as _,b as c,F as y,a as x,f as g,t as d}from"./app.bca73d12.js";const P={name:"Search",data(){return{query:"",actors:[],loading:!1,searched:!1,totalActors:"",error:null,currentPage:1,perPage:50,defaultPhoto:"https://via.placeholder.com/150x150?text=No+Photo"}},methods:{fetchPreviousPage(){this.currentPage>1&&(this.currentPage--,this.searchActors())},fetchNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.searchActors())},searchDefault(){this.currentPage=1,this.query.trim().length>0?this.searchActors():this.error="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043F\u0440\u043E\u0441"},async searchActors(){const s=this.query.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ");this.loading=!0,axios.get(`https://api.kinopoisk.dev/v1/person?movies.description=${s}&page=${this.currentPage}&limit=${this.perPage}`,{headers:{"X-API-KEY":"YGHZGWA-5ZC4XX9-HTH03V2-Q24F4QB"}}).then(i=>{this.actors=i.data.docs,this.totalPages=i.data.pages,this.totalActors=i.data.total,this.loading=!1}).catch(i=>{this.loading=!1,this.actors=[],this.totalPages=0,this.totalActors=0,this.error="\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0434\u0430\u043D\u043D\u044B\u0445"})}}},v={class:"container mx-auto max-w-xl py-8"},b={class:"mb-4"},k={key:0,class:"text-center font-medium py-4"},w={key:1},A={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},D=["src"],N=["href"],C={class:"text-lg font-medium"},q={key:0,class:"text-gray-500"},j={key:2,class:"text-center font-medium py-4"},B={key:3,class:"flex justify-center mt-8"},S=["disabled"],V={class:"px-4 py-2 rounded-md bg-gray-200 text-gray-700 mr-2"},z=["disabled"],F={key:4,class:"flex justify-center mt-4 text-red-500"};function H(n,s,i,K,t,l){return o(),a("div",v,[r("div",b,[m(r("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>t.query=e),onKeyup:s[1]||(s[1]=_((...e)=>l.searchDefault&&l.searchDefault(...e),["enter"])),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043F\u0440\u043E\u0441 \u043D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C",class:"w-full p-2 rounded-md border-gray-300 focus:outline-none focus:border-blue-500"},null,544),[[p,t.query,void 0,{trim:!0}]]),r("button",{onClick:s[2]||(s[2]=(...e)=>l.searchDefault&&l.searchDefault(...e)),class:"ml-4 px-4 py-2 rounded-md bg-blue-500 text-white"},"\u0418\u0441\u043A\u0430\u0442\u044C")]),t.loading?(o(),a("div",k," \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432... ")):c("",!0),t.actors.length>0?(o(),a("div",w,[r("ul",A,[(o(!0),a(y,null,x(t.actors,e=>{var u,h;return o(),a("li",{key:e.id,class:"flex flex-col items-center border rounded-md p-4 shadow-md"},[r("img",{src:(u=e.photo)!=null?u:t.defaultPhoto,class:"w-32 h-32 rounded-full object-cover mb-2"},null,8,D),r("a",{href:`https://www.kinopoisk.ru/name/${e.id}`},[r("div",C,d((h=e.name)!=null?h:e.enName),1),e.age?(o(),a("div",q,d(e.age)+" \u043B\u0435\u0442",1)):c("",!0)],8,N)])}),128))])])):c("",!0),t.totalActors===0?(o(),a("div",j," \u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u043F\u0440\u043E\u0441 \u043D\u0430 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u043E\u043C \u044F\u0437\u044B\u043A\u0435 ")):c("",!0),t.actors.length>0?(o(),a("div",B,[r("button",{onClick:s[3]||(s[3]=g((...e)=>l.fetchPreviousPage&&l.fetchPreviousPage(...e),["prevent"])),disabled:t.currentPage===1,class:"px-4 py-2 rounded-md bg-blue-500 text-white mr-2"},"\u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 ",8,S),r("p",V,d(t.currentPage)+" \u0438\u0437 "+d(n.totalPages),1),r("button",{onClick:s[4]||(s[4]=g((...e)=>l.fetchNextPage&&l.fetchNextPage(...e),["prevent"])),disabled:t.currentPage===n.totalPages,class:"px-4 py-2 rounded-md bg-blue-500 text-white ml-2"},"\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 ",8,z)])):c("",!0),t.error?(o(),a("div",F,d(t.error),1)):c("",!0)])}const W=f(P,[["render",H],["__scopeId","data-v-0daf1e6f"]]);export{W as default};
