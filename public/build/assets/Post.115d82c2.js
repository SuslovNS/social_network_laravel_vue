import{_ as g,r as f,o as r,c as n,e,t as i,f as m,b as c,h as a,d as w,w as b,n as _,i as h,v as p,F as k,a as x}from"./app.e2188581.js";const y={name:"Post",props:["post"],data(){return{title:"",content:"",body:"",isRepost:!1,repostedId:null,errors:[],comments:[],isShowed:!1,comment:null,isDelete:!1}},methods:{toggleLike(d){axios.post(`/api/posts/${d.id}/toggle_like`).then(t=>{d.is_liked=t.data.is_liked,d.likes_count=t.data.likes_count})},setParentId(d){this.comment=d},storeComment(d){const t=this.comment?this.comment.id:null;axios.post(`/api/posts/${d.id}/comment`,{body:this.body,parent_id:t}).then(s=>{this.body="",this.comments.unshift(s.data.data),this.comment=null,d.comments_count++,this.isShowed=!0})},getComments(d){axios.get(`/api/posts/${d.id}/comment`).then(t=>{this.comments=t.data.data,this.isShowed=!0})},openRepost(){this.$route.name!=="user.personal"&&(this.isRepost=!this.isRepost)},repost(d){this.$route.name!=="user.personal"&&axios.post(`/api/posts/${d.id}/repost`,{title:this.title,content:this.content}).then(t=>{this.title="",this.content="",d.reposted_by_posts_count++}).catch(t=>{this.errors=t.response.data.errors})},deletePost(d){axios.delete(`/api/posts/${d.id}/delete`).then(t=>{this.isDelete=!0})}}},C={key:0},R={class:"mb-8 pb-8 border-b border-gray-400"},V={class:"flex justify-between items-center"},B={class:"text-xl"},M=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),P=[M],S=["src","alt"],j={key:1,class:"bg-gray-100 p-4 my-4 border border-gray-200"},z={class:"text"},D={class:"text-xl"},L=["src","alt"],I={class:"text-right"},N={class:"flex justify-between items-center mt-2"},A={class:"text-slate-500 text-sm"},U={class:"flex"},F={class:"flex mr-2"},T=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"},null,-1),E=[T],H={class:"flex mr-2"},q=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"},null,-1),G=[q],J={class:"flex"},K=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"},null,-1),O=[K],Q={key:2,class:"mt-4"},W={key:0},X={class:"text-sm mt-2 text-red-500"},Y={key:1},Z={class:"text-sm mt-2 text-red-500"},$={key:3,class:"mt-4"},ee={key:1},te={class:"mt-4 pt-4 border-t border-gray-300"},se={class:"flex mb-2"},oe={class:"text-sm mr-2"},re=["onClick"],ne={key:0,class:"text-sky-400"},le={class:"text-right text-sm"},ie={class:"mt-4"},de={class:"mb-3"},ce={class:"flex items-center"},ue={key:0,class:"mr-2"};function me(d,t,s,ae,l,u){const v=f("router-link");return l.isDelete?c("",!0):(r(),n("div",C,[e("div",R,[e("div",V,[e("h1",B,i(s.post.title),1),this.$route.name==="user.personal"?(r(),n("svg",{key:0,onClick:t[0]||(t[0]=m(o=>u.deletePost(s.post),["prevent"])),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"stroke-black-500 cursor-pointer w-6 h-6"},P)):c("",!0)]),s.post.image_url?(r(),n("img",{key:0,class:"my-3 mx-auto",src:s.post.image_url,alt:s.post.title},null,8,S)):c("",!0),e("p",null,i(s.post.content),1),s.post.reposted_post?(r(),n("div",j,[e("h2",z,[a("Reposted from "),w(v,{to:{name:"user.show",params:{id:s.post.reposted_post.user.id}}},{default:b(()=>[a(i(s.post.reposted_post.user.name),1)]),_:1},8,["to"])]),e("h1",D,i(s.post.reposted_post.title),1),s.post.reposted_post.image_url?(r(),n("img",{key:0,class:"my-3 mx-auto",src:s.post.reposted_post.image_url,alt:s.post.reposted_post.title},null,8,L)):c("",!0),e("p",null,i(s.post.reposted_post.content),1),e("p",I,i(s.post.reposted_post.date),1)])):c("",!0),e("div",N,[w(v,{class:"text-slate-500 text-sm",to:{name:"user.show",params:{id:s.post.user.id}}},{default:b(()=>[a(i(s.post.user.name),1)]),_:1},8,["to"]),e("p",A,i(s.post.date),1),e("div",U,[e("div",F,[(r(),n("svg",{onClick:t[1]||(t[1]=o=>u.getComments(s.post)),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:_(["mr-2 stroke-black-500 cursor-pointer hover:fill-red-500 w-6 h-6 fill-white"])},E)),e("p",null,i(s.post.comments_count),1)]),e("div",H,[(r(),n("svg",{onClick:t[2]||(t[2]=m(o=>u.openRepost(s.post),["prevent"])),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:_(["mr-2 stroke-black-500 cursor-pointer hover:fill-red-500 w-6 h-6","fill-white"])},G)),e("p",null,i(s.post.reposted_by_posts_count),1)]),e("div",J,[(r(),n("svg",{onClick:t[3]||(t[3]=m(o=>u.toggleLike(s.post),["prevent"])),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:_(["mr-2 stroke-black-500 cursor-pointer hover:fill-red-500 w-6 h-6",s.post.is_liked?"fill-red-500":"fill-white"])},O,2)),e("p",null,i(s.post.likes_count),1)])])]),l.isRepost?(r(),n("div",Q,[e("div",null,[h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.title=o),class:"w-96 mb-3 rounded-3xl border p-2 border-slate-400",type:"text",placeholder:"title"},null,512),[[p,l.title]])]),l.errors.title?(r(),n("div",W,[(r(!0),n(k,null,x(l.errors.title,o=>(r(),n("p",X,i(o),1))),256))])):c("",!0),e("div",null,[h(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.content=o),class:"w-96 mb-3 rounded-3xl border p-2 border-slate-400",placeholder:"content"},null,512),[[p,l.content]])]),l.errors.content?(r(),n("div",Y,[(r(!0),n(k,null,x(l.errors.content,o=>(r(),n("p",Z,i(o),1))),256))])):c("",!0),e("div",null,[e("a",{onClick:t[6]||(t[6]=m(o=>u.repost(s.post),["prevent"])),href:"#",class:"block p-2 w-32 text-center rounded-3xl bg-green-600 text-white hover:bg-white hover:border hover:border-green-600 hover:text-green-600 ml-auto"},"Repost")])])):c("",!0),s.post.comments_count>0?(r(),n("div",$,[l.isShowed?(r(),n("p",{key:0,onClick:t[7]||(t[7]=o=>l.isShowed=!1),class:"text-center cursor-pointer"},"Close comments")):c("",!0),l.comments&&l.isShowed?(r(),n("div",ee,[(r(!0),n(k,null,x(l.comments,o=>(r(),n("div",te,[e("div",se,[e("p",oe,i(o.user.name),1),e("p",{onClick:_e=>u.setParentId(o),class:"cursor-pointer text-sm text-sky-500"},"Answer",8,re)]),e("p",null,[o.answered_for_user?(r(),n("span",ne,i(o.answered_for_user?o.answered_for_user:"")+", ",1)):c("",!0),a(" "+i(o.body),1)]),e("p",le,i(o.date),1)]))),256))])):c("",!0)])):c("",!0),e("div",ie,[e("div",de,[e("div",ce,[l.comment?(r(),n("p",ue,"Answer for "+i(l.comment.user.name),1)):c("",!0),l.comment?(r(),n("p",{key:1,onClick:t[8]||(t[8]=o=>l.comment=null),class:"cursor-pointer text-sm text-sky-300"},"Cancel")):c("",!0)]),h(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.body=o),class:"w-96 mb-3 rounded-3xl border p-2 border-slate-400",type:"text",placeholder:"comment"},null,512),[[p,l.body]])]),e("div",null,[e("a",{onClick:t[10]||(t[10]=m(o=>u.storeComment(s.post),["prevent"])),href:"#",class:"block p-2 w-32 text-center rounded-3xl bg-red-600 text-white hover:bg-white hover:border hover:border-red-600 hover:text-red-600 ml-auto"},"Comment")])])])]))}const pe=g(y,[["render",me]]);export{pe as P};
