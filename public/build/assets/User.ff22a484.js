import{_ as c,o as i,c as o,e as t,t as n,F as u,a as _,f as m,i as p,v as l,n as d,p as g,j as v}from"./app.6adb9a39.js";const x={name:"User.vue",created(){window.Echo.channel("store_message").listen(".store_message",s=>{this.messages.push(s.message)})},data(){return{user:{},userGet:{},messages:[],messageInput:"",userId:this.$route.params.userId}},methods:{sendMessage(){axios.post(`/api/chat/${this.userId}/send`,{message:this.messageInput,sendUserId:this.user.id}).then(s=>{this.messageInput="",this.messages.push(s.data.data)})},getMessages(){axios.get(`/api/chat/${this.userId}`).then(s=>{this.messages=s.data.data,this.user=this.$route.meta.user})},getUserGet(){axios.get(`/api/users/get/${this.userId}`).then(s=>{this.userGet=s.data.data})}},mounted(){this.getUserGet(),this.getMessages()}},I=s=>(g("data-v-1123c87b"),s=s(),v(),s),f={class:"chat"},y={class:"empty-chat"},b={class:"chat-body"},M={key:0},U={class:"chat-messages"},w={class:"chat-message"},G={key:1,class:"empty-chat"},S={class:"chat-footer"},k=I(()=>t("button",{type:"submit"},"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",-1));function B(s,r,C,D,e,h){return i(),o("div",f,[t("div",y,[t("h3",null,"Chat with "+n(e.userGet.name),1)]),t("div",b,[e.messages.length>0?(i(),o("div",M,[t("div",U,[(i(!0),o(u,null,_(e.messages,a=>(i(),o("div",w,[t("div",{class:d(["chat-message-user",a.sent_id===e.user.id?"text-right":"text-left"])},n(a.sent_id===e.user.id?e.user.name:e.userGet.name),3),t("div",{class:d(["chat-message-text",a.sent_id===e.user.id?"text-right":"text-left"])},n(a.body),3),t("div",{class:d(["chat-message-timestamp",a.sent_id===e.user.id?"text-right":"text-left"])},n(a.time),3)]))),256))])])):(i(),o("div",G," No messages "))]),t("div",S,[t("form",{onSubmit:r[1]||(r[1]=m((...a)=>h.sendMessage&&h.sendMessage(...a),["prevent"]))},[p(t("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=a=>e.messageInput=a),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435"},null,512),[[l,e.messageInput]]),k],32)])])}const F=c(x,[["render",B],["__scopeId","data-v-1123c87b"]]);export{F as default};
