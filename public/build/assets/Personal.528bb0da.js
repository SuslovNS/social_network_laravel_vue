import{P as k}from"./Post.a84aed95.js";import{S as b}from"./Stat.f22310c0.js";import{_ as w,r as h,o,c as r,d as y,n as C,b as l,e as n,i as g,v,F as c,a as u,f as m,t as _,g as P}from"./app.a3a777a0.js";const S={name:"Personal",data(){return{title:"",content:"",image:null,posts:[],errors:[],stats:[],adding:!1}},components:{Post:k,Stat:b},mounted(){this.getPosts(),this.getStats()},methods:{getStats(){axios.post("/api/users/stats",{id:null}).then(i=>{this.stats=i.data.data})},getPosts(){axios.get("/api/posts").then(i=>{this.posts=i.data.data})},store(){const i=this.image?this.image.id:null;axios.post("/api/posts",{title:this.title,content:this.content,image_id:i}).then(t=>{this.title="",this.content="",this.image=null,this.posts.unshift(t.data.data)}).catch(t=>{this.errors=t.response.data.errors})},selectFile(){this.fileInput=this.$refs.file,this.fileInput.click()},storeImage(i){let t=i.target.files[0];const d=new FormData;d.append("image",t),axios.post("/api/post_images",d,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{this.image=p.data.data})}}},B={class:"w-96 mx-auto"},F={key:0,class:"flex justify-center"},I=n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),V=[I],D=n("p",null,"Add post",-1),M={key:2,class:"mb-4"},N={class:"mb-3"},j={key:0},z={class:"text-sm mt-2 text-red-500"},A={class:"mb-3"},T={key:1},U={class:"text-sm mt-2 text-red-500"},E={class:"flex mb-3 items-center"},H={key:0},L={key:2},q=["src"],G={key:3},J=n("h1",{class:"mb-8 pb-4 border-b border-gray-400"},"Posts",-1);function K(i,t,d,p,e,a){const f=h("Stat"),x=h("Post");return o(),r("div",B,[y(f,{stats:e.stats},null,8,["stats"]),e.adding?l("",!0):(o(),r("div",F,[(o(),r("svg",{onClick:t[0]||(t[0]=s=>e.adding=!0),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:C(["mr-2 stroke-black-500 cursor-pointer hover:fill-red-500 w-6 h-6","fill-white"])},V)),D])),e.adding?(o(),r("div",{key:1,onClick:t[1]||(t[1]=s=>e.adding=!1),class:"cursor-pointer text-center"},"Close")):l("",!0),e.adding?(o(),r("div",M,[n("div",N,[g(n("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.title=s),class:"w-96 rounded-3xl border p-2 border-slate-400",type:"text",placeholder:"title"},null,512),[[v,e.title]])]),e.errors.title?(o(),r("div",j,[(o(!0),r(c,null,u(e.errors.title,s=>(o(),r("p",z,_(s),1))),256))])):l("",!0),n("div",A,[g(n("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.content=s),class:"w-96 rounded-3xl border p-2 border-slate-400",placeholder:"content"},null,512),[[v,e.content]])]),e.errors.content?(o(),r("div",T,[(o(!0),r(c,null,u(e.errors.content,s=>(o(),r("p",U,_(s),1))),256))])):l("",!0),n("div",E,[n("div",null,[n("input",{onChange:t[4]||(t[4]=(...s)=>a.storeImage&&a.storeImage(...s)),ref:"file",type:"file",class:"hidden"},null,544),n("a",{href:"#",class:"block p-2 w-26 text-sm text-center rounded-3xl bg-sky-500 text-white",onClick:t[5]||(t[5]=m(s=>a.selectFile(),["prevent"]))},"Add image")]),e.image?(o(),r("div",H,[n("a",{href:"#",onClick:t[6]||(t[6]=m(s=>e.image=null,["prevent"])),class:"ml-3"},"Cancel")])):l("",!0)]),e.image?(o(),r("div",L,[n("img",{src:e.image.url,alt:"preview"},null,8,q)])):l("",!0),n("div",null,[n("a",{onClick:t[7]||(t[7]=m((...s)=>a.store&&a.store(...s),["prevent"])),href:"#",class:"block p-2 w-32 text-center rounded-3xl bg-red-600 text-white hover:bg-white hover:border hover:border-red-600 hover:text-red-600 ml-auto"},"Publish")])])):l("",!0),e.posts?(o(),r("div",G,[J,(o(!0),r(c,null,u(e.posts,s=>(o(),P(x,{post:s},null,8,["post"]))),256))])):l("",!0)])}const W=w(S,[["render",K]]);export{W as default};
